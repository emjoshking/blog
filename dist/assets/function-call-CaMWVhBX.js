import{P as I,m as B,e as T}from"./mount-component-pmzlwA-R.js";import{i as z,d as M,J as C,b as N,a5 as j,q as a,R as b,X as L,m as k,n as v,aC as U,j as w,I as q,aP as V,s as D,k as O,ae as H,y as J,r as R,aB as X}from"./index-BfvfAF7U.js";let d=0;function _(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[A,i]=z("toast"),E=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],F={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:v,iconSize:v,duration:U(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:v};var G=M({name:A,props:F,emits:["update:show"],setup(e,{emit:l,slots:o}){let u,s=!1;const c=()=>{const n=e.show&&e.forbidClick;s!==n&&(s=n,_(s))},r=n=>l("update:show",n),g=()=>{e.closeOnClick&&r(!1)},f=()=>clearTimeout(u),m=()=>{const{icon:n,type:t,iconSize:p,iconPrefix:P,loadingType:x}=e;if(n||t==="success"||t==="fail")return a(q,{name:n||t,size:p,class:i("icon"),classPrefix:P},null);if(t==="loading")return a(V,{class:i("loading"),size:p,type:x},null)},S=()=>{const{type:n,message:t}=e;if(o.message)return a("div",{class:i("text")},[o.message()]);if(D(t)&&t!=="")return n==="html"?a("div",{key:0,class:i("text"),innerHTML:String(t)},null):a("div",{class:i("text")},[t])};return C(()=>[e.show,e.forbidClick],c),C(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(u=setTimeout(()=>{r(!1)},e.duration))}),N(c),j(c),()=>a(I,b({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:f,"onUpdate:show":r},L(e,E)),{default:()=>[m(),S()]})}});const K={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let y=[],Q=!1,h=O({},K);const W=new Map;function Y(e){return J(e)?e:{message:e}}function Z(){const{instance:e,unmount:l}=B({setup(){const o=R(""),{open:u,state:s,close:c,toggle:r}=T(),g=()=>{},f=()=>a(G,b(s,{onClosed:g,"onUpdate:show":r}),null);return C(o,m=>{s.message=m}),X().render=f,{open:u,close:c,message:o}}});return e}function $(){if(!y.length||Q){const e=Z();y.push(e)}return y[y.length-1]}function oe(e={}){if(!H)return{};const l=$(),o=Y(e);return l.open(O({},h,W.get(o.type||h.type),o)),l}export{oe as a,G as s};
